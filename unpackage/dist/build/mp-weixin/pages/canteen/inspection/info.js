(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/canteen/inspection/info"],{2853:function(t,e,n){"use strict";n.r(e);var a=n("a274"),i=n("ea3f");for(var u in i)["default"].indexOf(u)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(u);n("40d7");var r=n("828b"),o=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);e["default"]=o.exports},"40d7":function(t,e,n){"use strict";var a=n("adca"),i=n.n(a);i.a},a09b:function(t,e,n){"use strict";(function(t,e){var a=n("47a9");n("2f6b");a(n("3240"));var i=a(n("2853"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(i.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},a274:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return u})),n.d(e,"a",(function(){return a}));var a={uniDataSelect:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-data-select/components/uni-data-select/uni-data-select")]).then(n.bind(null,"ab52"))},uniDatetimePicker:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-datetime-picker/components/uni-datetime-picker/uni-datetime-picker")]).then(n.bind(null,"af6b"))}},i=function(){var t=this.$createElement;this._self._c},u=[]},adca:function(t,e,n){},ea3f:function(t,e,n){"use strict";n.r(e);var a=n("f8ed"),i=n.n(a);for(var u in a)["default"].indexOf(u)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(u);e["default"]=i.a},f8ed:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n("8dbc"),i=n("0b88"),u=(n("a104"),n("74a8")),r={mixins:[a.publicMixin],data:function(){return{menuButtonInfo:null,deptOptions:[],userOptions:[],materialOptions:[],form:{materialId:"",nationalStandard:"GB 2760—2014",testData:"",testResults:"",testTime:"",testBy:"",remark:""},queryParam:{testId:""},rules:[{name:"materialId",rule:["required"],msg:["请选择食材名"]},{name:"nationalStandard",rule:["required"],msg:["请输入国家标准"]},{name:"testData",rule:["required"],msg:["请输入检测数据"]},{name:"testResults",rule:["required"],msg:["请输入检测结果"]},{name:"testTime",rule:["required"],msg:["请选择时间"]},{name:"testBy",rule:["required"],msg:["请选择检测人"]}]}},onLoad:function(e){var n=e.id;this.menuButtonInfo=t.getMenuButtonBoundingClientRect(),this.getOptionsData(),n&&(console.log(n),this.queryParam.testId=n,this.asyncGetDetail())},methods:{back:function(){t.navigateBack()},getOptionsData:function(){var t=this;Promise.all([(0,i.deptList)(),(0,i.mxMaterialInfoList)(),(0,i.userList)()]).then((function(e){console.log("所有下拉数据",e);var n=e[0],a=e[1],i=e[2];t.deptOptions=n.data.map((function(t){return{text:t.deptName,value:t.deptId}})),t.materialOptions=a.data.map((function(t){return{text:t.materialName,value:t.materialId}})),t.userOptions=i.data.map((function(t){return{text:t.userName,value:t.userId}}))}))},suer:function(){var t=this,e=this.queryParam.testId?i.getInspectionUpdate:i.getInspectionSave,n=u.validation(this.form,this.rules);n?this.$mvc.alert(n,"error"):e(this.form).then((function(e){0==e.code&&(t.$mvc.alert("提交成功!","success"),setTimeout((function(){t.goToPage("/pages/canteen/inspection/list")}),2e3))}))},asyncGetDetail:function(){var t=this;(0,i.getInspectionInfo)(this.queryParam).then((function(e){0==e.code&&(console.log(e),t.form=e.data)}))}}};e.default=r}).call(this,n("df3c")["default"])}},[["a09b","common/runtime","common/vendor"]]]);