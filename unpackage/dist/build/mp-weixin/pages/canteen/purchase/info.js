(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/canteen/purchase/info"],{"0168":function(e,t,n){"use strict";n.r(t);var a=n("eb73"),i=n("ad84");for(var u in i)["default"].indexOf(u)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(u);n("16a7");var r=n("828b"),o=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);t["default"]=o.exports},"16a7":function(e,t,n){"use strict";var a=n("fa8f"),i=n.n(a);i.a},"331e":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n("8dbc"),i=n("0b88"),u=(n("a104"),n("74a8")),r={mixins:[a.publicMixin],data:function(){return{menuButtonInfo:null,deptOptions:[],userOptions:[],materialOptions:[],form:{department:"",materialId:"",planManager:"",updateTime:"",quantity:"",unit:"",remark:"",purchaseId:""},queryParam:{purchaseId:""},rules:[{name:"department",rule:["required"],msg:["请选择部门"]},{name:"planManager",rule:["required"],msg:["请选择负责人"]},{name:"updateTime",rule:["required"],msg:["请选择日期"]},{name:"materialId",rule:["required"],msg:["请选择食材"]},{name:"quantity",rule:["required"],msg:["请输入数量"]},{name:"unit",rule:["required"],msg:["请输入单位"]}]}},onLoad:function(t){var n=t.id;this.menuButtonInfo=e.getMenuButtonBoundingClientRect(),this.getOptionsData(),n&&(this.queryParam.purchaseId=n,this.asyncGetDetail())},methods:{back:function(){e.navigateBack()},getOptionsData:function(){var e=this;Promise.all([(0,i.deptList)(),(0,i.mxMaterialInfoList)(),(0,i.userList)()]).then((function(t){console.log("所有下拉数据",t);var n=t[0],a=t[1],i=t[2];e.deptOptions=n.data.map((function(e){return{text:e.deptName,value:String(e.deptId)}})),e.materialOptions=a.data.map((function(e){return{text:e.materialName,value:e.materialId}})),e.userOptions=i.data.map((function(e){return{text:e.userName,value:String(e.userId)}}))}))},suer:function(){var e=this,t=this.queryParam.purchaseId?i.purchaseUpdate:i.purchaseSave,n=u.validation(this.form,this.rules);n?this.$mvc.alert(n,"error"):t(this.form).then((function(t){0==t.code&&(e.$mvc.alert("提交成功!","success"),setTimeout((function(){e.goToPage("/pages/canteen/purchase/list")}),2e3))}))},asyncGetDetail:function(){var e=this;(0,i.purchaseInfo)(this.queryParam).then((function(t){console.log(t),0==t.code&&(e.form=t.data)}))}}};t.default=r}).call(this,n("df3c")["default"])},ad84:function(e,t,n){"use strict";n.r(t);var a=n("331e"),i=n.n(a);for(var u in a)["default"].indexOf(u)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(u);t["default"]=i.a},e548:function(e,t,n){"use strict";(function(e,t){var a=n("47a9");n("2f6b");a(n("3240"));var i=a(n("0168"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(i.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},eb73:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return a}));var a={uniDataSelect:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-data-select/components/uni-data-select/uni-data-select")]).then(n.bind(null,"ab52"))},uniDatetimePicker:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-datetime-picker/components/uni-datetime-picker/uni-datetime-picker")]).then(n.bind(null,"af6b"))}},i=function(){var e=this.$createElement;this._self._c},u=[]},fa8f:function(e,t,n){}},[["e548","common/runtime","common/vendor"]]]);